<mat-toolbar color="primary">Регистрация</mat-toolbar>

<div *ngIf="errorMsg" class="error">
  <header class="full-width">Ошибка</header>
  <div class="full-width"><span>{{errorMsg}}</span></div>
  <button (click)="errorMsg = null" mat-raised-button color="warn">X</button>
</div>

<div *ngIf="success" class="error success">
  <header class="full-width">Успешно!</header>
  <div class="full-width"><span>Вы успешно зарегистрировались, теперь нужно войти</span></div>
  <button (click)="success = false" mat-raised-button color="warn">X</button>
</div>



<form #userForm="ngForm" (ngSubmit)="onSubmit()">
  <mat-form-field class="full-width">
    <input [(ngModel)]="user.name" name="name" matInput placeholder="Имя" autocomplete="off"
      #name="ngModel" 
      required
      minlength="2"
      maxlength="20"
      pattern="[a-zA-ZА-Яа-яёЁ]*"
    >
    <mat-hint *ngIf="name.invalid && (name.dirty || name.touched) && name.errors.required">Это поле является обязательным</mat-hint>
    <mat-hint *ngIf="name.invalid && (name.dirty || name.touched) && name.errors.pattern">Недопустимые символы</mat-hint>
    <mat-hint *ngIf="name.invalid && (name.dirty || name.touched) && !name.errors.pattern && name.errors.minlength">Минимальная длина имени 2 буквы</mat-hint>
  </mat-form-field>

  <mat-form-field class="full-width">
    <input [(ngModel)]="user.surname" name="surname" matInput placeholder="Фамилия" autocomplete="off"
      #surname="ngModel" 
      required
      minlength="2"
      maxlength="20"
      pattern="[a-zA-ZА-Яа-яёЁ]*"      
    >
    <mat-hint *ngIf="surname.invalid && (surname.dirty || surname.touched) && surname.errors.required">Это поле является обязательным</mat-hint>
    <mat-hint *ngIf="surname.invalid && (surname.dirty || surname.touched) && surname.errors.pattern">Недопустимые символы</mat-hint>
    <mat-hint *ngIf="surname.invalid && (surname.dirty || surname.touched) && !surname.errors.pattern && surname.errors.minlength">Минимальная длина фамилии 2 буквы</mat-hint>
  </mat-form-field>


  <mat-form-field class="full-width">
    <input [(ngModel)]="user.email" name="email" type="email" email matInput placeholder="Email" autocomplete="off"
      #email="ngModel"
      required
      pattern=""
    >
    <mat-hint *ngIf="email.invalid && (email.dirty || email.touched) && email.errors.required">Это поле является обязательным</mat-hint>
    <mat-hint *ngIf="email.invalid && (email.dirty || email.touched) && email.errors.email">Неверный email</mat-hint>
  </mat-form-field>

  <mat-form-field class="full-width">
    <input [(ngModel)]="user.login" name="login" type="text" matInput placeholder="Логин" autocomplete="off"
      #login="ngModel" 
      required
      minlength="4"
      maxlength="8"
      pattern="[a-zA-Z0-9]*"
    >
    <mat-hint *ngIf="login.invalid && (login.dirty || login.touched) && login.errors.required">Это поле является обязательным</mat-hint>
    <mat-hint *ngIf="login.invalid && (login.dirty || login.touched) && login.errors.pattern">Только латинские буквы и цифры</mat-hint>
    <mat-hint *ngIf="login.invalid && (login.dirty || login.touched) && !login.errors.pattern && login.errors.minlength">Минимальная длина логина 4 символа</mat-hint>
  </mat-form-field>

  <mat-form-field class="full-width">
    <input [(ngModel)]="user.password" name="password" matInput placeholder="Пароль" autocomplete="off"
      #password="ngModel"
      required
      minlength="6"
      maxlength="20"
      pattern="[\w]*"
    >
    <mat-hint *ngIf="password.invalid && (password.dirty || password.touched) && password.errors.required">Это поле является обязательным</mat-hint>
    <mat-hint *ngIf="password.invalid && (password.dirty || password.touched) && password.errors.pattern">Только латинские буквы цифры, и символ нижнего подчеркивания</mat-hint>
    <mat-hint *ngIf="password.invalid && (password.dirty || password.touched) && !password.errors.pattern && password.errors.minlength">Минимальная длина пароля 6 символов</mat-hint>
  </mat-form-field>

  <button [disabled]="userForm.form.invalid" type="submit" mat-raised-button class="full-width" color="primary">Зарегистрироваться</button>
</form>